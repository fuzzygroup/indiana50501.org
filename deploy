#!/bin/bash

REQUIRED_RUBY_VERSION="3.2.0"
CURRENT_RUBY_VERSION=$(ruby -e 'puts RUBY_VERSION' 2>/dev/null)

echo "================================================================="
if [[ "$CURRENT_RUBY_VERSION" != "$REQUIRED_RUBY_VERSION" ]]; then
  echo "⚠️  WARNING: Ruby $REQUIRED_RUBY_VERSION expected, but you're using $CURRENT_RUBY_VERSION"
  echo "You may want to run: mise use ruby@$REQUIRED_RUBY_VERSION"
else
  echo "Ruby version $CURRENT_RUBY_VERSION OK"
fi
echo "================================================================="

read -p "Press Enter to continue ..." </dev/tty
ruby build.rb
scp -p -r * ssh -t dh_5xqc5j@iad1-shared-b7-48.dreamhost.com:/home/dh_5xqc5j/indiana50501.org/
echo "================================================================="
echo "ABOUT TO DELETE AUTOGENERATED HTML THAT SHOULDN'T STICK AROUND"
echo "THIS MAY FAIL"
echo "================================================================="

